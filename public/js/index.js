(()=>{function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.props=e,this.createQR=this.createQR.bind(this),this.createLinkvCard=this.createLinkvCard.bind(this),this.createContactBtn=this.createContactBtn.bind(this),this.fillFields=this.fillFields.bind(this),this.createLinkvCard(),this.createContactBtn(),this.createQR(),this.fillFields()}var r,a;return r=t,(a=[{key:"fillFields",value:function(){var e=this,t=document.querySelectorAll(".fullName");Object.keys(t).map((function(r){t[r].innerText=e.props.name+" "+e.props.lastName}));var r=document.querySelectorAll(".workPhone");Object.keys(r).map((function(t){var a=r[t];a.innerText=e.props.workPhone,a.setAttribute("href","tel:"+e.props.workPhone)}));var a=document.querySelectorAll(".workEmail");Object.keys(a).map((function(t){var r=a[t];r.innerText=e.props.workEmail,r.setAttribute("href","mailto:"+e.props.workEmail+"?Subject=Contact Us")})),r=document.querySelectorAll(".phone"),Object.keys(r).map((function(t){var a=r[t];a.innerText=e.props.phone,a.setAttribute("href","tel:"+e.props.phone)})),a=document.querySelectorAll(".email"),Object.keys(a).map((function(t){var r=a[t];r.innerText=e.props.email,r.setAttribute("href","mailto:"+e.props.email+"?Subject=Contact Us")}));var o=document.querySelectorAll(".avatar");Object.keys(o).map((function(t){var r=o[t];e.props.avatar?r.setAttribute("src",e.props.avatar):r.setAttribute("src","https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y")}));var n=document.querySelectorAll(".carrer");Object.keys(n).map((function(t){var r=n[t];e.props.carrer?r.innerText=e.props.carrer:r.innerText="Royal Resorts Anfitrion"}))}},{key:"createContactBtn",value:function(){var e=document.createElement("a");e.className="lnk",e.innerText="Contact Me",e.setAttribute("href","mailto:"+this.props.workEmail+"?Subject=Contact Us"),document.querySelector("#vcardLink").appendChild(e)}},{key:"createLinkvCard",value:function(){var e=vCard.create(vCard.Version.FOUR);e.addFormattedname(this.props.name+" "+this.props.lastName),e.addEmail(this.props.email,vCard.Type.HOME),e.addEmail(this.props.workEmail,vCard.Type.WORK),e.addPhone(this.props.phone,vCard.Type.HOME),e.addPhone(this.props.workPhone,vCard.Type.WORK);var t=vCard.export(e,"vCard",!1);t.className="lnk",t.setAttribute("download",this.props.name+"-"+this.props.lastName+"-contact.vcf"),document.querySelector("#vcardLink").appendChild(t)}},{key:"createQR",value:function(){var e=new JSQR,t=new e.Code;t.encodeMode=t.ENCODE_MODE.BYTE,t.version=t.DEFAULT,t.errorCorrection=t.ERROR_CORRECTION.H;var r=new e.Input;r.dataType=r.DATA_TYPE.VCARD,r.data={version:"3.0",type:"person",firstName:this.props.name,middleName:"",lastName:this.props.lastName,organization:"RoyalResorts",title:"",home:{eMail:this.props.email,street:"",phone:this.props.phone,fax:"",city:"",zip:"",state:"",url:"",country:""},work:{eMail:this.props.workEmail,street:"",phone:this.props.workPhone,fax:"",city:"",zip:"",state:"",url:"",country:""},mobilePhone:"",birthday:null}}}])&&e(r.prototype,a),t}();window.onload=function(){firebase.initializeApp({apiKey:"AIzaSyCeHQarGQpwF09lppxs5o_tZ36m_6YRtIM",authDomain:"vcard-profile.firebaseapp.com",databaseURL:"https://vcard-profile-default-rtdb.firebaseio.com",projectId:"vcard-profile",storageBucket:"vcard-profile.appspot.com",messagingSenderId:"775091731083",appId:"1:775091731083:web:9e53b859d711c65199328e"});var e,r,a=firebase.database(),o=("token",e=null,r=[],location.search.substr(1).split("&").forEach((function(t){"token"===(r=t.split("="))[0]&&(e=decodeURIComponent(r[1]))})),e);a.ref("hosts/"+o).once("value").then((function(e){console.log(e.val());var r=e.val();new t({name:r.Nombre,lastName:"",email:r.email,phone:r["Teléfono"],workEmail:r.email,workPhone:r["Teléfono"],avatar:r.foto?r.foto:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y",carrer:r.Puesto})}))}})();